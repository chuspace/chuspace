<%= turbo_frame_tag dom_id(draft, :actions), class: 'flex items-center' do %>
  <%= content_tag :div, draft.status, id: 'chu-editor-status', class: 'text-xs mr-4' %>
  <% if allowed_to?(:show?, draft) && draft.post %>
    <%= link_to 'View post', publication_post_path(@publication, draft.post), class: 'btn btn-primary btn-xs mr-4', 'data-turbo-frame': :'_top' %>
  <% end %>

  <% if allowed_to?(:commit?, draft) %>
    <%= turbo_frame_tag(dom_id(draft, :new_commit)) do %>
      <%= button_to publication_new_commit_draft_path(publication, draft), method: :get, class: 'btn btn-primary btn-xs turbo-btn mr-4' do %>
        <div class="idle">Commit</div>
        <div class="loading">
          <div class='flex items-center'>
            <div class='spinner on-button'></div>
            <span class='ml-2'>Loading</span>
          </div>
        </div>
      <% end %>
    <% end %>
  <% end %>

  <% if allowed_to?(:publish?, draft) %>
    <%= button_to publication_publish_draft_path(publication, draft), class: 'btn btn-accent btn-xs turbo-btn mr-4', 'data-turbo-frame': :'_top' do %>
      <div class="idle">Publish</div>
      <div class="loading">
        <div class='flex items-center'>
          <div class='spinner on-button'></div>
          <span class='ml-2'>Loading</span>
        </div>
      </div>
    <% end %>
  <% end %>
<% end %>
