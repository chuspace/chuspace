<!DOCTYPE html>
<html lang='en' class='h-full'>
  <%= render 'layouts/head' %>
  <body class="flex flex-col h-full">
    <%= render 'layouts/flash' %>
    <% if @draft.stale? %>
      <alert-notification>
        <div data-target='alert-notification.element' class="alert alert-notice w-full z-50 rounded-none flex">
          <span class='flex-1 text-center block'>You have uncommitted changes</span>
          <%= link_to '#', data: { action: 'click:alert-notification#preventDefault' }, title: 'Close alert bar' do %>
            <%= inline_svg_tag 'icons/x', class: 'w-4 h-4 fill-current', data: { action: 'click:alert-notification#hide' } %>
          <% end %>
        </div>
      </alert-notification>
    <% end %>

    <chu-editor
      data-autofocus='true'
      data-saving='false'
      data-status='<%= @draft.status %>'
      data-image-provider-path='<%= publication_assets_path(@publication) %>'
      data-draft-path='<%= @draft.path %>'
      data-publication-permalink='<%= @publication.permalink %>'
    >
      <%= render 'publications/drafts/header', draft: @draft %>

      <section class="container flex-1 pt-24">
        <%= yield %>
      </section>
    </chu-editor>
  </body>
</html>
