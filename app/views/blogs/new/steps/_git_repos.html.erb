<%= simple_form_for([Current.user, blog], html: { class: 'relative', data: { target: 'auto-refresh-form.form', "turbo-frame": '_top' } }) do |form| %>

  <details>
    <summary class='btn'>
      <div class='flex items-center' data-menu-button>
        <%= image_tag @git_provider.adapter.user.avatar_url, class: 'w-4 h-4 mask mask-circle mr-2' %>
        <%= content_tag :span, @git_provider.adapter.user.login %>
      </div>
    </summary>
    <details-menu role="menu" tabindex="0" class="p-2 shadow menu dropdown-content absolute z-10 bg-base-200 rounded-box w-52">
      <% @git_provider.users.each do |user|%>
        <li tabindex="0" role="menuitem">
          <input type="checkbox" name="login" value="<%= user.login %>" class='hidden' />
          <a data-menu-button-contents class='flex items-center'/>
            <%= image_tag user.avatar_url, class: 'w-4 h-4 mask mask-circle mr-2'  %>
            <%= content_tag :span, user.login %>
          </a>
        </li>
      <% end %>
    </details-menu>
  </details>

  <auto-complete
    src="<%= git_providers_repositories_path(git_provider: @git_provider.name) %>"
    for="repos-popup"
    class='relative block'
    data-autoselect="true">
    <%= form.input(
        :repo_fullname,
      as: :string,
      input_html: {
        value: blog.repo_fullname
      },
      wrapper_html: { class: 'relative' }
    ) %>
    <ul
      id="repos-popup"
      class='absolute z-10 shadow dropdown-content bg-base-100 border w-full'
    >
    </ul>
    <div id="repos-popup-feedback" class="sr-only"></div>
  </auto-complete>
<% end %>

  <%= button_to 'Configure repository', '/auth/github_app', class: 'btn btn-sm btn-primary', data: { turbo: false } %>
