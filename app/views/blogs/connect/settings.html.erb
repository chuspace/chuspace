<div class='sm:w-2/3 w-full mx-auto'>
  <h3>Connect an existing blog</h3>
  <p class='text-secondary mt-2'>Simple three easy steps to get started</p>

  <div class="grid grid-cols-3 gap-4 my-8 w-full">
    <%= link_to 'Pick your Git Provider', connect_blog_path, class: "tab tab-bordered" %>
    <%= link_to 'Pick a repository', connect_blog_git_provider_path(git_provider: @git_provider.name), class: "tab tab-bordered" %>
    <a class="tab tab-bordered tab-active">Blog settings</a>
  </div>

  <h4>Finalise blog settings</h4>
  <div class='mt-2 text-secondary'>
    <p>
      Connect an existing static site blog hosted on one of the
      linked Git providers.
      The selected Git repository must support publishing posts using markdown.
      <code>Example: Jekyll, Hugo or Astro</code>
    </p>
  </div>

  <%= turbo_frame_tag(@blog) do %>
    <%= simple_form_for(@blog, url: user_blogs_path(Current.user), html: { class: 'relative', data: { target: 'auto-refresh-form.form', "turbo-frame": '_top' } }) do |form| %>
      <div class='mt-8'>
        <h5 class='border-b border-base-200 pb-2'>Basics</h5>
        <%= form.input :git_provider_id, as: :hidden, required: true %>
        <%= form.input :repo_fullname, as: :hidden, required: true %>
        <%= form.input :name, required: true, input_html: { value: @blog.repository.name } %>
        <%= form.input :description, as: :text, required: true %>
      </div>

      <div class='mt-8'>
        <h5 class='border-b border-base-200 pb-2'>Content</h5>
        <%= form.input :repo_posts_dir, as: :select, collection: @blog.repository.dirs, include_blank: 'Choose' %>
        <%= form.input :repo_drafts_dir, as: :select, collection: @blog.repository.dirs, include_blank: 'Choose' %>
        <%= form.input :repo_assets_dir, as: :select, collection: @blog.repository.dirs, include_blank: 'Choose' %>
        <%= form.input(
            :repo_readme_path,
            as: :select,
            collection: @blog.repository.files,
            include_blank: 'Choose'
          )
        %>
      </div>

      <div class='mt-8'>
        <h5 class='border-b border-base-200 pb-2'>Settings</h5>
        <%= form.input :visibility, as: :select, collection: Blog.visibilities %>
        <%= form.input(:personal) %>
      </div>

      <%= form.button :submit, 'Connect', class: "mt-12" %>
    <% end %>
  <% end %>
</div>
