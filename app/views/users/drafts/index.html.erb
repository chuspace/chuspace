<%= render(Card::Component.new) do |card| %>
  <% card.title do %>
    <%= render 'shared/breadcrumbs' %>
  <% end %>

  <% card.actions do %>
    <% if @user.personal_publication %>
      <%= link_to 'New', publication_new_draft_path(@user.personal_publication, path: @path), class: 'btn btn-primary btn-sm' %>
    <% else %>
      <%= link_to 'Connect', connect_personal_publications_path, class: 'btn btn-primary btn-sm' %>
    <% end %>
  <% end %>

  <% card.body do %>
    <% if @user.personal_publication.present? %>
      <% path = params[:path].blank? ? user_drafts_path(@user) : nested_user_drafts_path(@user, path: params[:path]) %>
      <%= turbo_frame_tag dom_id(@user, :drafts), src: path, lazy: true do %>
        <%= render 'shared/card_loader', count: 5 %>
      <% end %>
    <% else %>
      <%= render 'shared/placeholder', content: 'Personal publication not connected' %>
    <% end %>
  <% end %>
<% end %>
